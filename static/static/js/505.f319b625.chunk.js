"use strict";(self.webpackChunktriton_ui=self.webpackChunktriton_ui||[]).push([[505],{2505:(e,s,t)=>{t.r(s),t.d(s,{default:()=>n});var a=t(5043),d=t(3216),r=t(5475),l=t(6291),i=t(579);const n=()=>{var e,s,t;const{uuid:n}=(0,d.g)(),[c,m]=(0,a.useState)(null),[x,o]=(0,a.useState)(null),[h,u]=(0,a.useState)(!0),[g,p]=(0,a.useState)(null),[j,v]=(0,a.useState)("overview");(0,a.useEffect)((()=>{(async()=>{if(n)try{u(!0);const e=await(0,l.ax)(n);m(e.data);try{const e=await(0,l.p5)(n);o(e.data)}catch(t){console.log("Could not fetch job output:",t)}}catch(a){var e,s;p((null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to fetch job details")}finally{u(!1)}})()}),[n]);const y=e=>{if(!e)return"N/A";return new Date(e).toLocaleString()},N=(e,s)=>{if(!e||!s)return"\u2014";const t=new Date(e),a=new Date(s).getTime()-t.getTime(),d=Math.floor(a/1e3);if(d<60)return`${d} sec`;return`${Math.floor(d/60)} min ${d%60} sec`};return h?(0,i.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,i.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"})}):g?(0,i.jsx)("div",{className:"rounded-md bg-red-50 p-4 m-4",children:(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-red-800",children:"Error loading job details"}),(0,i.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,i.jsx)("p",{children:g})})]})})}):c?(0,i.jsxs)("div",{className:"px-4 sm:px-6 lg:px-8 py-6",children:[(0,i.jsx)("div",{className:"mb-6",children:(0,i.jsx)("nav",{className:"flex","aria-label":"Breadcrumb",children:(0,i.jsxs)("ol",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,i.jsx)("li",{children:(0,i.jsx)(r.N_,{to:"/",className:"hover:text-indigo-600",children:"Home"})}),(0,i.jsxs)("li",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,i.jsx)(r.N_,{to:"/jobs",className:"ml-2 hover:text-indigo-600",children:"Jobs"})]}),(0,i.jsxs)("li",{className:"flex items-center",children:[(0,i.jsx)("svg",{className:"h-4 w-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),(0,i.jsx)("span",{className:"ml-2 font-medium text-gray-900 truncate max-w-xs",children:c.name})]})]})})}),(0,i.jsx)("div",{className:"bg-white shadow rounded-lg mb-6",children:(0,i.jsxs)("div",{className:"px-6 py-5",children:[(0,i.jsx)("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:(0,i.jsx)("div",{className:"flex-1 min-w-0 mb-4 lg:mb-0",children:(0,i.jsxs)("div",{className:"flex items-center",children:[(0,i.jsx)("div",{className:"mr-4",children:(0,i.jsx)("div",{className:"rounded-full h-12 w-12 flex items-center justify-center "+("succeeded"===c.execution?"bg-green-100":"failed"===c.execution?"bg-red-100":"bg-yellow-100"),children:(0,i.jsx)("svg",{className:"h-6 w-6 "+("succeeded"===c.execution?"text-green-500":"failed"===c.execution?"text-red-500":"text-yellow-500"),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:tracking-tight flex items-center",children:[c.name,(0,i.jsx)("span",{className:"ml-3 px-3 py-0.5 inline-flex text-sm leading-5 font-medium rounded-full "+("succeeded"===c.execution?"bg-green-100 text-green-800":"failed"===c.execution?"bg-red-100 text-red-800":"running"===c.execution?"bg-blue-100 text-blue-800":"queued"===c.execution?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"succeeded"===c.execution?"Succeeded":"failed"===c.execution?"Failed":"running"===c.execution?"Running":"queued"===c.execution?"Queued":c.execution})]}),(0,i.jsx)("div",{className:"mt-1 text-sm text-gray-500 truncate",children:c.uuid})]})]})})}),(0,i.jsxs)("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[(0,i.jsx)("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,i.jsxs)("dl",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Created"}),(0,i.jsx)("dd",{className:"mt-1 text-xl font-semibold text-gray-900",children:y(c.created_at)})]})})}),(0,i.jsx)("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,i.jsxs)("dl",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Duration"}),(0,i.jsx)("dd",{className:"mt-1 text-xl font-semibold text-gray-900",children:c.elapsed||"\u2014"})]})})}),(0,i.jsx)("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,i.jsxs)("dl",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Timeout"}),(0,i.jsx)("dd",{className:"mt-1 text-xl font-semibold text-gray-900",children:c.timeout?`${c.timeout} sec`:"\u2014"})]})})}),(0,i.jsx)("div",{className:"bg-gray-50 overflow-hidden shadow rounded-lg",children:(0,i.jsx)("div",{className:"px-4 py-5 sm:p-6",children:(0,i.jsxs)("dl",{children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"VM"}),(0,i.jsx)("dd",{className:"mt-1 text-xl font-semibold text-gray-900",children:null!==(e=c.params)&&void 0!==e&&e.vm_uuid?(0,i.jsx)(r.N_,{to:`/vms/${c.params.vm_uuid}`,className:"text-indigo-600 hover:text-indigo-900 text-sm truncate",children:c.params.vm_uuid}):"\u2014"})]})})})]})]})}),(0,i.jsxs)("div",{className:"bg-white shadow rounded-lg mb-6",children:[(0,i.jsx)("div",{className:"border-b border-gray-200",children:(0,i.jsxs)("nav",{className:"-mb-px flex",children:[(0,i.jsx)("button",{onClick:()=>v("overview"),className:("overview"===j?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm focus:outline-none",children:"Overview"}),(0,i.jsx)("button",{onClick:()=>v("params"),className:("params"===j?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm focus:outline-none",children:"Parameters"}),(0,i.jsx)("button",{onClick:()=>v("steps"),className:("steps"===j?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm focus:outline-none",children:"Steps"}),(0,i.jsx)("button",{onClick:()=>v("output"),className:("output"===j?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-4 px-6 border-b-2 font-medium text-sm focus:outline-none",children:"Output"})]})}),(0,i.jsxs)("div",{className:"p-6",children:["overview"===j&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Job Overview"}),(0,i.jsx)("div",{className:"bg-gray-50 shadow-sm rounded-lg overflow-hidden",children:(0,i.jsxs)("dl",{className:"divide-y divide-gray-200",children:[(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Job Name"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:c.name})]}),(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Status"}),(0,i.jsx)("dd",{className:"mt-1 text-sm sm:mt-0 sm:col-span-2",children:(0,i.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("succeeded"===c.execution?"bg-green-100 text-green-800":"failed"===c.execution?"bg-red-100 text-red-800":"running"===c.execution?"bg-blue-100 text-blue-800":"queued"===c.execution?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:"succeeded"===c.execution?"Succeeded":"failed"===c.execution?"Failed":"running"===c.execution?"Running":"queued"===c.execution?"Queued":c.execution})})]}),(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"UUID"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2 font-mono",children:c.uuid})]}),(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Created At"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:y(c.created_at)})]}),(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Duration"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:c.elapsed||"\u2014"})]}),(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Timeout"}),(0,i.jsxs)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:[c.timeout||"\u2014"," seconds"]})]}),(null===(s=c.params)||void 0===s?void 0:s.vm_uuid)&&(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"VM"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:(0,i.jsx)(r.N_,{to:`/vms/${c.params.vm_uuid}`,className:"text-indigo-600 hover:text-indigo-900 font-mono",children:c.params.vm_uuid})})]}),(null===(t=c.params)||void 0===t?void 0:t.task)&&(0,i.jsxs)("div",{className:"px-4 py-3 sm:grid sm:grid-cols-3 sm:gap-4 sm:px-6",children:[(0,i.jsx)("dt",{className:"text-sm font-medium text-gray-500",children:"Task"}),(0,i.jsx)("dd",{className:"mt-1 text-sm text-gray-900 sm:mt-0 sm:col-span-2",children:c.params.task})]})]})})]}),"params"===j&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Job Parameters"}),c.params?(0,i.jsx)("div",{className:"bg-gray-50 shadow-sm rounded-lg overflow-hidden",children:(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("pre",{className:"text-sm text-gray-800 overflow-auto max-h-[600px] p-4 bg-gray-100 rounded",children:JSON.stringify(c.params,null,2)})})}):(0,i.jsx)("div",{className:"bg-gray-50 p-6 text-center text-sm text-gray-500",children:"No parameters available for this job."})]}),"steps"===j&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Job Steps"}),c.chain_results&&c.chain_results.length>0?(0,i.jsx)("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:(0,i.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,i.jsx)("thead",{className:"bg-gray-50",children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{scope:"col",className:"py-3.5 pl-4 pr-3 text-left text-sm font-semibold text-gray-900",children:"Step"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Result"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Started"}),(0,i.jsx)("th",{scope:"col",className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Duration"})]})}),(0,i.jsx)("tbody",{className:"divide-y divide-gray-200 bg-white",children:c.chain_results.map(((e,s)=>(0,i.jsxs)("tr",{className:(e.error?"bg-red-50":"")+" hover:bg-gray-50",children:[(0,i.jsx)("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm sm:pl-6",children:(0,i.jsx)("div",{className:"font-medium text-gray-900",children:e.name})}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm",children:e.error?(0,i.jsx)("div",{className:"text-red-600",children:e.error}):(0,i.jsx)("div",{className:"text-green-600",children:e.result})}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:e.started_at?y(e.started_at):"\u2014"}),(0,i.jsx)("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-500",children:N(e.started_at,e.finished_at)})]},s)))})]})}):(0,i.jsx)("div",{className:"bg-gray-50 p-6 text-center text-sm text-gray-500",children:"No step information available for this job."})]}),"output"===j&&(0,i.jsxs)("div",{children:[(0,i.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Job Output"}),x?(0,i.jsx)("div",{className:"bg-gray-50 shadow-sm rounded-lg overflow-hidden",children:(0,i.jsx)("div",{className:"p-4",children:(0,i.jsx)("pre",{className:"text-sm text-gray-800 overflow-auto max-h-[600px] p-4 bg-gray-100 rounded",children:x})})}):(0,i.jsx)("div",{className:"bg-gray-50 p-6 text-center text-sm text-gray-500",children:"No output available for this job."})]})]})]})]}):(0,i.jsx)("div",{className:"rounded-md bg-yellow-50 p-4 m-4",children:(0,i.jsx)("div",{className:"flex",children:(0,i.jsxs)("div",{className:"ml-3",children:[(0,i.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"Job not found"}),(0,i.jsxs)("div",{className:"mt-2 text-sm text-yellow-700",children:[(0,i.jsx)("p",{children:"The job you're looking for doesn't exist or has been deleted."}),(0,i.jsx)(r.N_,{to:"/jobs",className:"text-indigo-600 hover:text-indigo-900 mt-2 inline-block",children:"Return to Jobs List"})]})]})})})}}}]);
//# sourceMappingURL=505.f319b625.chunk.js.map